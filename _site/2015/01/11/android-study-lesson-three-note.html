<!DOCTYPE html>
<html>
<head>
    
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>시온고 안드로이드 스터디 노트 - 3.New Activities And Intents | Youngbin Han</title>
  <meta name="description" content="Lesson 2 에 이어 Lesson 3 노트를 계속 합니다. 이번에는 스터디 맴버들이 Udacity 강의와 함께 보면서 공부 할 수 있도록. 일찍 노트를 작성하게 되었습니다.저번 Lesson 2 에는 갑자기 어려운 내용이 나왔는대. Lesson 3 은 또 조금 쉬운 내용이내요. ...">
<!--        Jquery-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46663268-3', 'auto');
  ga('send', 'pageview');

</script>

<link rel="stylesheet" href="/blog/css/material.min.css">
<link rel="stylesheet" href="/blog/css/font-awesome.min.css">
  <link rel="stylesheet" href="/blog/css/custom.css">
  <link rel="canonical" href="http://sukso96100.github.io//blog/2015/01/11/android-study-lesson-three-note.html">
  <link rel="alternate" type="application/rss+xml" title="Youngbin Han" href="http://sukso96100.github.io//blog/feed.xml" />

<!--Browser Update Notification-->
<script>
var $buoop = {c:2};
function $buo_f(){
 var e = document.createElement("script");
 e.src = "https://browser-update.org/update.js";
 document.body.appendChild(e);
};
try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
catch(e){window.attachEvent("onload", $buo_f)}
</script>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">

    </head>
    <body>

    <div class="demo-layout-transparent mdl-layout mdl-js-layout">
  <header class="mdl-layout__header mdl-layout__header--transparent">
    <div class="mdl-layout__header-row">
      <!-- Title -->
      <span class="mdl-layout-title">Youngbin Han</span>
      <!-- Add spacer, to align navigation to the right -->
      <div class="mdl-layout-spacer"></div>
      <!-- Navigation -->
      <nav class="mdl-navigation">

      </nav>
    </div>
  </header>
  <div class="mdl-layout__drawer">
    <span class="mdl-layout-title">MENU</span>
    <nav class="mdl-navigation">
      <a class="mdl-navigation__link" href="">Link</a>
      <a class="mdl-navigation__link" href="">Link</a>
      <a class="mdl-navigation__link" href="">Link</a>
      <a class="mdl-navigation__link" href="">Link</a>
    </nav>
  </div>
  <main class="mdl-layout__content">
    <div align="center">
    <div class="mdl-card mdl-cell mdl-cell--12-col postcard" align="start">
           <div class="mdl-card__media mdl-color-text--grey-50"
           style="
           padding:16px;">
             <a href="/blog/"><h3 style="color:white;">시온고 안드로이드 스터디 노트 - 3.New Activities And Intents</h3></a>
           </div>
           <section class="content">
           <table><tr><td><i class="material-icons">today</i></td><td>2015.01.11</td></tr></table>
           <hr>
          <p>Lesson 2 에 이어 Lesson 3 노트를 계속 합니다. 이번에는 스터디 맴버들이 Udacity 강의와 함께 보면서 공부 할 수 있도록. 일찍 노트를 작성하게 되었습니다.
저번 Lesson 2 에는 갑자기 어려운 내용이 나왔는대. Lesson 3 은 또 조금 쉬운 내용이내요. Udacity 강의가 하나의 앱을 개발하는 과정을 가지고 코스가 짜여있다 보니.
난이도가 들쭉날쭉 한 것 같내요. 이번 Lesson 3 에서는 새로운 Activity 를 만들고, Activity 사이에서 Intent 등을 이용해 통신하는 방법을 주로 다룹니다.</p>

<h2 id="section">시작하기 앞서…</h2>
<ul>
  <li>Lesson 2 는 공부 하였나요? <a href="http://www.youngbin.tk/2015/01/01/android-study-lesson-two-note.html">안했으면 먼저 하고 오시길.</a></li>
  <li>Lesson 2 에서 작성한 소스코드를 준비하세요.</li>
</ul>

<h2 id="lesson-3--">Lesson 3 내용 요약.</h2>
<ul>
  <li>OnItemClickListener - ListView 각 항목 클릭 처리</li>
  <li>새 Activity 생성.</li>
  <li>Intent 에 대해 알아보기.</li>
  <li>명시적 인텐트 (Explicit Intent) 를 이용해 Activity 이동하기.</li>
  <li>PreferenceActivity 를 이용해 설정화면 만들기.</li>
  <li>암시적 인텐트 (Implicit Intent) 에 대해 알아보기.</li>
  <li>BroadcastReceiver 와 Intent Filter 에 대해 알아보기.</li>
</ul>

<h2 id="onitemclicklistener--listview----">OnItemClickListener 로 ListView 각 항목 클릭 처리하기.</h2>
<p>OnItemClickListener 를 등룩하여, 각 항목별 클릭을 처리해 봅시다. 일단 지금은, ListView 에서 각 항목을 클릭하면 해당 항목 내용이 Toast 메시지로 나타나도록 해 봅시다.
먼저 OnItemClickListener 를 등룩 해 줍시다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WeatherFragment</span> <span class="kd">extends</span> <span class="n">Fragment</span> <span class="o">{</span>
<span class="o">...</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">View</span> <span class="n">onCreateView</span><span class="o">(</span><span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                             <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">...</span>
        <span class="n">mat</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">"1838716"</span><span class="o">);</span> <span class="c1">//myAsyncTask 실행하기</span>
        <span class="c1">//ListView 에 OnItemClickListener 등룩하기.</span>
        <span class="n">LV</span><span class="o">.</span><span class="na">setOnItemClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">AdapterView</span><span class="o">.</span><span class="na">OnItemClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="n">onItemClick</span><span class="o">(</span><span class="n">AdapterView</span><span class="o">&lt;?&gt;</span> <span class="n">parent</span><span class="o">,</span> <span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="kt">long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//각 항목 클릭시 실행될 코드를 여기에 입력합니다.</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="k">return</span> <span class="n">rootView</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="o">...</span>
<span class="o">}</span></code></pre></figure>

<p>그리고 Adapter 에서 항목에 해당되는 데이터를 얻어서 Toast 메시지로 표시 해 줍시다. 아래 사진이 Toast 메시지가 나타났을 때 사진입니다. 다들 이미 많이 보셨을 겁니다.
<img src="/blogimgs/toast_message.png" /><br /></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WeatherFragment</span> <span class="kd">extends</span> <span class="n">Fragment</span> <span class="o">{</span>
<span class="o">...</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">View</span> <span class="n">onCreateView</span><span class="o">(</span><span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                             <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">...</span>
        <span class="n">mat</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">"1838716"</span><span class="o">);</span> <span class="c1">//myAsyncTask 실행하기</span>
        <span class="c1">//ListView 에 OnItemClickListener 등룩하기.</span>
        <span class="n">LV</span><span class="o">.</span><span class="na">setOnItemClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">AdapterView</span><span class="o">.</span><span class="na">OnItemClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="n">onItemClick</span><span class="o">(</span><span class="n">AdapterView</span><span class="o">&lt;?&gt;</span> <span class="n">parent</span><span class="o">,</span> <span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="kt">long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//각 항목 클릭시 실행될 코드를 여기에 입력합니다.</span>
                <span class="n">String</span> <span class="n">ForecastItem</span> <span class="o">=</span> <span class="n">myAdapter</span><span class="o">.</span><span class="na">getItem</span><span class="o">(</span><span class="n">position</span><span class="o">);</span> <span class="c1">//항목에 해당되는 데이터 얻기</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getActivity</span><span class="o">(),</span> <span class="c1">//Context 는 Activity 로부터 얻습니다.</span>
                                <span class="n">ForecastItem</span><span class="o">,</span> <span class="c1">//Toast 로 표시할 문자열 입니다.</span>
                                <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span> <span class="c1">//Toast 메시지를 얼마나 긴 시간동안 표시할지 정합니다.</span>
                                <span class="o">).</span><span class="na">show</span><span class="o">();</span> <span class="c1">// show() 메서드로 Toast 를 보여줍니다.</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="k">return</span> <span class="n">rootView</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="o">...</span>
<span class="o">}</span></code></pre></figure>

<h2 id="activity---">Activity 하나 새로 만들기</h2>
<p>Activity 를 하나 더 만들어 줍시다. 이 Activity 는 더 자세한 날씨 정보를 표시하는대 사용 할 겁니다.
아래 사진처럼, 패키지 디렉터리를 우클릭해서, 새로운 Activity 를 만들어 주세요. Blank Activity with Fragment 을 선택하여 생성합니다.
<img src="/blogimgs/create_new_blank_activity_with_fragment.png" /><br />
이름은 DetailActivity 로 정하고, Hierarchical Parent(계층 부모)는 MainActiity 로 설정하여, 
DetailActivity 의 상위(또는 부모) Activity 가 MainActivity 가 되도록 합시다.
<img src="/blogimgs/new_blank_activity_with_fragment.png" /><br />
Activity 를 하나 새로 만들었으나. 아직 우리가 이 Activity 를 실행 하고 있지 않습니다. Intent 를 이용해서 한번 실행해 봅시다.</p>

<h2 id="intent">Intent</h2>
<p>Intent 는 다른 앱 컴포넌트로부터 액션을 하도록 요청하거나(예를 들면 주소록 추가 화면 열기, 웹 브라우저를 열고 특정 웹사이트로 이동) 앱 컴포넌트들 사이에서 통신을 하는대 사용됩니다.
보통 아래와 같은 것들을 하기 위해서 Intent 를 많이 사용 합니다</p>

<ul>
  <li>Activity 를 시작하기 위해</li>
  <li>Service 를 시작하기 위해 - Service 에 대해서는 추후 더 자세히 다룰 예정.</li>
  <li>Broadcast(방송)을 전달하기 위해</li>
</ul>

<p>Intent 는 두가지 종류로 나뉩니다.</p>

<ul>
  <li>
    <p>Explicit Intent (명시적 인텐트)
&gt;정확한 클래스 이름으로 어떤 앱 컴포넌트를 시작할지, 또는 통신할지 명시적으로 정합니다. 보통 자신이 개발하는 앱에 있는 다른 컴포넌트들을 시작하거나 통신하기 위해 명시적 인텐트를 사용합니다. 당연히 자신이 개발하는 앱 이니, 어떤 앱 컴포넌트가 있는지 앱 컴포넌트 이름은 뭔지 다 알고 있으니까요.</p>
  </li>
  <li>
    <p>Implicit Intent (암시적 인텐트)
&gt;정확한 앱 컴포넌트를 명시하지 않습니다. 대신 수행할 일반적인 액션을 정의합니다. 특정 웹페이지를 웹 브라우저 앱에서 열기, 지도 앱에서 사용자 위치 보여주기 등을 예로 들 수 있습니다.</p>
  </li>
</ul>

<h2 id="explicit-intent---detailactivity-">Explicit Intent 를 사용하여 DetailActivity 시작하기</h2>
<p>Explicit Intent 를 이용해 한번 DetailActivity 로 전환해 봅시다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WeatherFragment</span> <span class="kd">extends</span> <span class="n">Fragment</span> <span class="o">{</span>
<span class="o">...</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">View</span> <span class="n">onCreateView</span><span class="o">(</span><span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                             <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">...</span>
        <span class="n">mat</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">"1838716"</span><span class="o">);</span> <span class="c1">//myAsyncTask 실행하기</span>
        <span class="c1">//ListView 에 OnItemClickListener 등룩하기.</span>
        <span class="n">LV</span><span class="o">.</span><span class="na">setOnItemClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">AdapterView</span><span class="o">.</span><span class="na">OnItemClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="n">onItemClick</span><span class="o">(</span><span class="n">AdapterView</span><span class="o">&lt;?&gt;</span> <span class="n">parent</span><span class="o">,</span> <span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="kt">long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//각 항목 클릭시 실행될 코드를 여기에 입력합니다.</span>
                <span class="n">String</span> <span class="n">ForecastItem</span> <span class="o">=</span> <span class="n">myAdapter</span><span class="o">.</span><span class="na">getItem</span><span class="o">(</span><span class="n">position</span><span class="o">);</span> <span class="c1">//항목에 해당되는 데이터 얻기</span>
                <span class="c1">//새로운 Intent 객체 만들기</span>
                <span class="c1">//getActivity() - Context 는 Activity 에서 얻습니다.</span>
                <span class="c1">//DetailFragment.class 대상 앱 컴포넌트 입니다.</span>
                <span class="n">Intent</span> <span class="n">DetailIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">getActivity</span><span class="o">(),</span> <span class="n">DetailActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                <span class="n">startActivity</span><span class="o">(</span><span class="n">DetailIntent</span><span class="o">);</span> <span class="c1">// Activity 시작하기</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="k">return</span> <span class="n">rootView</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="o">...</span>
<span class="o">}</span></code></pre></figure>

<h2 id="intent--extra-">Intent 에 Extra 첨부하기</h2>
<p>Intent 를 이용해 통신을 할 때, Extra 를 첨부하여 간단한 데이터를 주고 받을 수 있습니다. DetailActivity에 날씨 정보를 Extra 로 첨부해 보내봅시다.
Intent.putExtra(“키 이름”, 보낼 데이터); 를 이용해 Extra를 넣고, 나중에 받을 때는 getIntent.getStringExtra() / getIntent.getIntExtra() 등으로 받아서 사용하면 됩니다. 우선 첨부해서 보내 봅시다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WeatherFragment</span> <span class="kd">extends</span> <span class="n">Fragment</span> <span class="o">{</span>
<span class="o">...</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">View</span> <span class="n">onCreateView</span><span class="o">(</span><span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                             <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">...</span>
        <span class="n">mat</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">"1838716"</span><span class="o">);</span> <span class="c1">//myAsyncTask 실행하기</span>
        <span class="c1">//ListView 에 OnItemClickListener 등룩하기.</span>
        <span class="n">LV</span><span class="o">.</span><span class="na">setOnItemClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">AdapterView</span><span class="o">.</span><span class="na">OnItemClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="n">onItemClick</span><span class="o">(</span><span class="n">AdapterView</span><span class="o">&lt;?&gt;</span> <span class="n">parent</span><span class="o">,</span> <span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="kt">long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//각 항목 클릭시 실행될 코드를 여기에 입력합니다.</span>
                <span class="n">String</span> <span class="n">ForecastItem</span> <span class="o">=</span> <span class="n">myAdapter</span><span class="o">.</span><span class="na">getItem</span><span class="o">(</span><span class="n">position</span><span class="o">);</span> <span class="c1">//항목에 해당되는 데이터 얻기</span>
                <span class="c1">//새로운 Intent 객체 만들기</span>
                <span class="c1">//getActivity() - Context 는 Activity 에서 얻습니다.</span>
                <span class="c1">//DetailFragment.class 대상 앱 컴포넌트 입니다.</span>
                <span class="n">Intent</span> <span class="n">DetailIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">getActivity</span><span class="o">(),</span> <span class="n">DetailActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                <span class="c1">// 키값은 weather_data, 첨부된 데이터는 String 형태인 ForecastItem 로 하였습니다.</span>
                <span class="n">DetailIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"weather_data"</span><span class="o">,</span> <span class="n">ForecastItem</span><span class="o">);</span> 
                <span class="n">startActivity</span><span class="o">(</span><span class="n">DetailIntent</span><span class="o">);</span> <span class="c1">// Activity 시작하기</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="k">return</span> <span class="n">rootView</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="o">...</span>
<span class="o">}</span></code></pre></figure>

<p>이제, DetailActivity 에서 받아서 표시해 봅시다. DetailActivity 에서도, Fragment 에 코드를 작성할 겁니다. 마찬가지로 Fragment 의 onCreateView 메서드를 찾아 그곳에 코드를 작성합니다. 받은 Intent 는 Activity 가 가지고 있으므로 getActivity 를 이용해 Intent 를 얻습니다.</p>

<p>우선, 레이아웃 파일에서 날씨 정보를 표시할 TextView 를 작업합시다. 일단 기본적으로 들어가 있는 TextView 에 id 값만 지정해 줍시다.
저는 id 를 weather_data 로 하겠습니다.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;RelativeLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span> <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span> <span class="na">android:paddingLeft=</span><span class="s">"@dimen/activity_horizontal_margin"</span>
    <span class="na">android:paddingRight=</span><span class="s">"@dimen/activity_horizontal_margin"</span>
    <span class="na">android:paddingTop=</span><span class="s">"@dimen/activity_vertical_margin"</span>
    <span class="na">android:paddingBottom=</span><span class="s">"@dimen/activity_vertical_margin"</span>
    <span class="na">tools:context=</span><span class="s">"com.youngbin.androidstudy.DetailActivity$PlaceholderFragment"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;TextView</span> <span class="na">android:text=</span><span class="s">"@string/hello_world"</span> 
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:id=</span><span class="s">"@+id/weather_data"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/RelativeLayout&gt;</span></code></pre></figure>

<p>그리고 이어서 Java 코드 작업을 해 줍시다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DetailActivity</span> <span class="kd">extends</span> <span class="n">ActionBarActivity</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="cm">/**
     * A placeholder fragment containing a simple view.
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">PlaceholderFragment</span> <span class="kd">extends</span> <span class="n">Fragment</span> <span class="o">{</span>

        <span class="kd">public</span> <span class="n">PlaceholderFragment</span><span class="o">()</span> <span class="o">{</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">View</span> <span class="n">onCreateView</span><span class="o">(</span><span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                                 <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>

            <span class="n">View</span> <span class="n">rootView</span> <span class="o">=</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">fragment_detail</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
            <span class="c1">//날씨 정보 표시에 쓸 TextView 찾기           </span>
            <span class="n">TextView</span> <span class="n">WeatherTxt</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span><span class="n">rootView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">weather_data</span><span class="o">);</span>
            <span class="c1">//Activity 가 받은 Intent 얻어내어, 같이 Extra 로 온 데이터 얻기</span>
            <span class="n">String</span> <span class="n">WeatherData</span> <span class="o">=</span> <span class="n">getActivity</span><span class="o">().</span><span class="na">getIntent</span><span class="o">().</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"weather_data"</span><span class="o">);</span>
            <span class="c1">//TextView 내용을 얻은 데이터로 설정.</span>
            <span class="n">WeatherTxt</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">WeatherData</span><span class="o">);</span>
            <span class="k">return</span> <span class="n">rootView</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h2 id="preferenceactivity----">PreferenceActivity 를 이용해 설정화면 만들기.</h2>
<p>이번에는 PreferenceActivity를 이용해서 앱 설정 화면을 만들어 봅시다. 일단 우리가 만들 설정 화면에는 지역과 온도 단위 설정을 넣을것입니다.
안드로이드 스튜디오에 이러한 Activity 를 만들어 주는 기능이 있기는 하지만. 이는 구버전과 최신 버전 모두에 호환되는 코드가 자동으로 생성됩니다. 생성되는 코드가 좀 복잡하기에,
여기서는. 그냥 빈 Activity 를 하나 만들고 PreferenceActivity 를 상속하도록 수정 한 다음. 필요한 것들을 구현 하겠습니다. DetailActivity 를 생성하실 때와 비슷한 방법으로 하시면 됩니다. 대신 Blank Activity with Fragmnt 가 아닌 Blank Activity 를 선택하여 생성합니다. 이름은 SettingsActivity 로 하고 상위 Acivitiy 는 MainActivity 로 해 줍시다.</p>

<p>SettingsActivity 를 생성 하셨으면, 우선 xml 파일 먼저 작성 하겠습니다. res 디렉터리 안에, xml디렉터리를 하나 생성합니다. 그리고 그 안에 settings.xml 을 생성합시다.
지역 선택 설정은. 지역 id 코드를 입력 하도록 할 것입니다. 그러므로 EditTextPreference 를 사용하며, 온도 단위 설정은. 단위 목록에서 선택하여 설정 하므로, ListPreference 를 사용합니다.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;PreferenceScreen</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!--도시 id 설정--&gt;</span>
    <span class="nt">&lt;EditTextPreference</span>
        <span class="na">android:key=</span><span class="s">"pref_city_id"</span>
        <span class="na">android:title=</span><span class="s">"@string/pref_city_id"</span>
        <span class="na">android:defaultValue=</span><span class="s">"@string/pref_city_id_default_value"</span> 
        <span class="na">android:inputType=</span><span class="s">"text"</span>
        <span class="na">android:singleLine=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
    <span class="c">&lt;!--온도 단위 설정--&gt;</span>
    <span class="nt">&lt;ListPreference</span>
        <span class="na">android:key=</span><span class="s">"pref_unit"</span>
        <span class="na">android:title=</span><span class="s">"@string/pref_unit"</span>
        <span class="na">android:dialogTitle=</span><span class="s">"@string/pref_unit_dialog"</span>
        <span class="na">android:entries=</span><span class="s">"@array/pref_unit_entry"</span>
        <span class="na">android:entryValues=</span><span class="s">"@array/pref_unit_entry_value"</span>
        <span class="na">android:defaultValue=</span><span class="s">"@string/pref_unit_default_value"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/PreferenceScreen&gt;</span></code></pre></figure>

<p>필요한 문자열도 strings.xml 에 추가 해 줍시다.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;resources&gt;</span>
    ...
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"pref_city_id"</span><span class="nt">&gt;</span>City Id<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"pref_city_id_dialog"</span><span class="nt">&gt;</span>Type City Id<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"pref_city_id_default_value"</span> <span class="na">translatable=</span><span class="s">"false"</span><span class="nt">&gt;</span>1838716<span class="nt">&lt;/string&gt;</span>
    
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"pref_unit"</span><span class="nt">&gt;</span>Unit<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"pref_unit_default_value"</span> <span class="na">translatable=</span><span class="s">"false"</span><span class="nt">&gt;</span>metric<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string-array</span> <span class="na">name=</span><span class="s">"pref_unit_entry"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;item&gt;</span>Metric<span class="nt">&lt;/item&gt;</span>
        <span class="nt">&lt;item&gt;</span>Imperial<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/string-array&gt;</span>
    <span class="nt">&lt;string-array</span> <span class="na">name=</span><span class="s">"pref_unit_entry_value"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;item&gt;</span>metric<span class="nt">&lt;/item&gt;</span>
        <span class="nt">&lt;item&gt;</span>imperial<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/string-array&gt;</span>
<span class="nt">&lt;/resources&gt;</span></code></pre></figure>

<p>Java 클래스 파일도 슬슬 수정해 봅시다. 먼저 아래와 같이 PreferenceActivity 를 상속하도록 수정합시다.
그리고 onCreate 메서드에서 평소에 보던 setContentView(); 대신 addPreferencesFromResource(); 를 이용해 조금전 작성한 xml 파일을 로드합니다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SettingsActivity</span> <span class="kd">extends</span> <span class="n">PreferenceActivity</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">addPreferencesFromResource</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">settings</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>클래스에 onPreferenceChangeListener를 구현하고, onPreferenceChangeListener에 Value 를 전달해 줄 메서드도 작성합니다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SettingsActivity</span> <span class="kd">extends</span> <span class="n">PreferenceActivity</span> 
    <span class="kd">implements</span> <span class="n">Preference</span><span class="o">.</span><span class="na">OnPreferenceChangeListener</span><span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="n">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
            <span class="n">addPreferencesFromResource</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">settings</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//onPreferenceChangeListener를 등룩하고, 설정 변경시 값을 onPreferenceChangeListener에 전달해줌.</span>
        <span class="kd">private</span> <span class="kt">void</span> <span class="n">bindPreferenceSummaryToValue</span><span class="o">(</span><span class="n">Preference</span> <span class="n">preference</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 값 변경을 감지하기 위해 onPreferenceChangeListener 를 등룩합니다.</span>
        <span class="n">preference</span><span class="o">.</span><span class="na">setOnPreferenceChangeListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>

        <span class="c1">// onPreferenceChangeListener 를 설정의 현재 값으로 걸어줍니다.</span>
        <span class="n">onPreferenceChange</span><span class="o">(</span><span class="n">preference</span><span class="o">,</span>
                <span class="n">PreferenceManager</span>
                        <span class="o">.</span><span class="na">getDefaultSharedPreferences</span><span class="o">(</span><span class="n">preference</span><span class="o">.</span><span class="na">getContext</span><span class="o">())</span>
                        <span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">preference</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="s">""</span><span class="o">));</span>
    <span class="o">}</span>
        <span class="c1">//설정이 변경되었음을 감지하는 인터페이스</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">onPreferenceChange</span><span class="o">(</span><span class="n">Preference</span> <span class="n">preference</span><span class="o">,</span> <span class="n">Object</span> <span class="n">newValue</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<p>onPreferenceChange메서드에 코드를 작성해서, 설정이 변경되면 선택한 내용이 설정 항목 제목 바로 아래 나타나는 Summary 로 나타나도록 해 줍시다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SettingsActivity</span> <span class="kd">extends</span> <span class="n">PreferenceActivity</span> 
    <span class="kd">implements</span> <span class="n">Preference</span><span class="o">.</span><span class="na">OnPreferenceChangeListener</span><span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="n">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
            <span class="n">addPreferencesFromResource</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">settings</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//onPreferenceChangeListener를 등룩하고, 설정 변경시 값을 onPreferenceChangeListener에 전달해줌.</span>
        <span class="kd">private</span> <span class="kt">void</span> <span class="n">bindPreferenceSummaryToValue</span><span class="o">(</span><span class="n">Preference</span> <span class="n">preference</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 값 변경을 감지하기 위해 onPreferenceChangeListener 를 등룩합니다.</span>
        <span class="n">preference</span><span class="o">.</span><span class="na">setOnPreferenceChangeListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>

        <span class="c1">// onPreferenceChangeListener 를 설정의 현재 값으로 걸어줍니다.</span>
        <span class="n">onPreferenceChange</span><span class="o">(</span><span class="n">preference</span><span class="o">,</span>
                <span class="n">PreferenceManager</span>
                        <span class="o">.</span><span class="na">getDefaultSharedPreferences</span><span class="o">(</span><span class="n">preference</span><span class="o">.</span><span class="na">getContext</span><span class="o">())</span>
                        <span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">preference</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="s">""</span><span class="o">));</span>
    <span class="o">}</span>
        <span class="c1">//설정이 변경되었음을 감지하는 인터페이스</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">onPreferenceChange</span><span class="o">(</span><span class="n">Preference</span> <span class="n">preference</span><span class="o">,</span> <span class="n">Object</span> <span class="n">newValue</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">stringValue</span> <span class="o">=</span> <span class="n">newValue</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">preference</span> <span class="k">instanceof</span> <span class="n">ListPreference</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// ListPreference 인 경우 목록에서 선택된 값을 얻어서 표시합니다.</span>
            <span class="n">ListPreference</span> <span class="n">listPreference</span> <span class="o">=</span> <span class="o">(</span><span class="n">ListPreference</span><span class="o">)</span> <span class="n">preference</span><span class="o">;</span>
            <span class="kt">int</span> <span class="n">prefIndex</span> <span class="o">=</span> <span class="n">listPreference</span><span class="o">.</span><span class="na">findIndexOfValue</span><span class="o">(</span><span class="n">stringValue</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">prefIndex</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">preference</span><span class="o">.</span><span class="na">setSummary</span><span class="o">(</span><span class="n">listPreference</span><span class="o">.</span><span class="na">getEntries</span><span class="o">()[</span><span class="n">prefIndex</span><span class="o">]);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">// 다른 Preference 는 간단히 설정된 값으로 표시합니다.</span>
            <span class="n">preference</span><span class="o">.</span><span class="na">setSummary</span><span class="o">(</span><span class="n">stringValue</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<p>설정 화면을 만들었습니다. 이제 설정 사항이 앱이 작동할 때 적용 되도록 해 봅시다. WeatherFragment 를 수정하여 설정값이 사용되도록 합시다.
PreferenceActivity 에서 설정한 설정값들은 SharedPreference 의 보호된 공간에 저장 됩니다. 다시 저장된 값들을 불러오거나 수정 하는 경우에는.
SharedPreference 클래스를 이용하면 됩니다.</p>

<p>우선 설정값을 불러온 다음. 그 값을 AsyncTask 작업이 실행 될 때 AsyncTask 클래스로 넘겨줘야 하는대. 매번 메서드를 일일이 호출하기 번거로우니.
따로 하나의 메서드를 만들어서 묶어버리고. 우리가 만든 메서드만 한번씩 호출해 줍시다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WeatherFragment</span> <span class="kd">extends</span> <span class="n">Fragment</span> <span class="o">{</span>
<span class="o">...</span>
    <span class="kt">void</span> <span class="n">updateWeather</span><span class="o">(){</span>
        <span class="n">SharedPreferences</span> <span class="n">Pref</span> <span class="o">=</span> <span class="n">PreferenceManager</span><span class="o">.</span><span class="na">getDefaultSharedPreferences</span><span class="o">(</span><span class="n">getActivity</span><span class="o">());</span>
        <span class="n">String</span> <span class="n">CityId</span> <span class="o">=</span> <span class="n">Pref</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"pref_city_id"</span><span class="o">,</span>
                <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">pref_city_id_default_value</span><span class="o">));</span>
        <span class="n">String</span> <span class="n">Unit</span> <span class="o">=</span> <span class="n">Pref</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"pref_unit"</span><span class="o">,</span>
                <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">pref_unit_default_value</span><span class="o">));</span>

        <span class="n">myAsyncTask</span> <span class="n">mat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">myAsyncTask</span><span class="o">();</span> <span class="c1">//myAsyncTask 객체 생성</span>
        <span class="n">mat</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">CityId</span><span class="o">,</span><span class="n">Unit</span><span class="o">);</span> <span class="c1">//myAsyncTask 실행하기</span>
    <span class="o">}</span>
    <span class="o">...</span>
<span class="o">}</span></code></pre></figure>

<p>우리가 기존에 호출한 AsyncTask 를 실행하는 메서드는 방금 추가한 updateWeather 메서드에서 호출되니 모두 지워줍시다.
아래와 같은 코드들을 지워주면 됩니다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">myAsyncTask</span> <span class="n">mat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">myAsyncTask</span><span class="o">();</span> <span class="c1">//myAsyncTask 객체 생성</span>
<span class="n">mat</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">CityId</span><span class="o">,</span><span class="n">Unit</span><span class="o">);</span> <span class="c1">//myAsyncTask 실행하기</span></code></pre></figure>

<p>그리고 그 자리에 updateWeather() 를 호출해 줍시다. 그리고 AsyncTask 클래스에서 추가로 넘겨준 값도 사용하도록 수정해 줍시다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WeatherFragment</span> <span class="kd">extends</span> <span class="n">Fragment</span> <span class="o">{</span>
    <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">WeatherData</span><span class="o">;</span>
    <span class="n">ArrayAdapter</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">myAdapter</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">WeatherFragment</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">View</span> <span class="n">onCreateView</span><span class="o">(</span><span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                             <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">...</span>
        <span class="c1">//Adapter 설정</span>
        <span class="n">LV</span><span class="o">.</span><span class="na">setAdapter</span><span class="o">(</span><span class="n">myAdapter</span><span class="o">);</span>


        <span class="n">updateWeather</span><span class="o">();</span>

        <span class="n">LV</span><span class="o">.</span><span class="na">setOnItemClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">AdapterView</span><span class="o">.</span><span class="na">OnItemClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">...</span>
        <span class="o">});</span>
        <span class="k">return</span> <span class="n">rootView</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="n">updateWeather</span><span class="o">(){</span>
        <span class="o">...</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">class</span> <span class="nc">myAsyncTask</span> <span class="kd">extends</span> <span class="n">AsyncTask</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Void</span><span class="o">,</span> <span class="n">String</span><span class="o">[]&gt;</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">forecastJsonStr</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="n">String</span><span class="o">[]</span> <span class="n">doInBackground</span><span class="o">(</span><span class="n">String</span><span class="o">...</span> <span class="n">params</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">HttpURLConnection</span> <span class="n">urlConnection</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">//HttpUrlConnection</span>
            <span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>


            <span class="c1">// 날시 데이터 URL 에 사용될 옵션</span>
            <span class="n">String</span> <span class="n">format</span> <span class="o">=</span> <span class="s">"json"</span><span class="o">;</span>
            <span class="n">String</span> <span class="n">units</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">numDays</span> <span class="o">=</span> <span class="mi">7</span><span class="o">;</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="c1">//새 URL 객체</span>
                <span class="c1">//UriBuilder 를 이용해 URL 만들기</span>
                <span class="kd">final</span> <span class="n">String</span> <span class="n">FORECAST_BASE_URL</span> <span class="o">=</span>
                        <span class="s">"http://api.openweathermap.org/data/2.5/forecast/daily?"</span><span class="o">;</span>
                <span class="kd">final</span> <span class="n">String</span> <span class="n">QUERY_PARAM</span> <span class="o">=</span> <span class="s">"id"</span><span class="o">;</span>
                <span class="kd">final</span> <span class="n">String</span> <span class="n">FORMAT_PARAM</span> <span class="o">=</span> <span class="s">"mode"</span><span class="o">;</span>
                <span class="kd">final</span> <span class="n">String</span> <span class="n">UNITS_PARAM</span> <span class="o">=</span> <span class="s">"units"</span><span class="o">;</span>
                <span class="kd">final</span> <span class="n">String</span> <span class="n">DAYS_PARAM</span> <span class="o">=</span> <span class="s">"cnt"</span><span class="o">;</span>


                <span class="n">Uri</span> <span class="n">builtUri</span> <span class="o">=</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">FORECAST_BASE_URL</span><span class="o">).</span><span class="na">buildUpon</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">appendQueryParameter</span><span class="o">(</span><span class="n">QUERY_PARAM</span><span class="o">,</span> <span class="n">params</span><span class="o">[</span><span class="mi">0</span><span class="o">])</span>
                        <span class="o">.</span><span class="na">appendQueryParameter</span><span class="o">(</span><span class="n">FORMAT_PARAM</span><span class="o">,</span> <span class="n">format</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">appendQueryParameter</span><span class="o">(</span><span class="n">UNITS_PARAM</span><span class="o">,</span> <span class="n">units</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">appendQueryParameter</span><span class="o">(</span><span class="n">DAYS_PARAM</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">numDays</span><span class="o">))</span>
                        <span class="o">.</span><span class="na">build</span><span class="o">();</span>

                <span class="o">...</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">forecastJsonStr</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
                <span class="o">...</span>
            <span class="o">}</span>

            <span class="k">try</span> <span class="o">{</span>
                <span class="o">...</span>
                <span class="k">return</span> <span class="n">WeatherDataArray</span><span class="o">;</span> <span class="c1">//데이터 반환</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JSONException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

       <span class="o">...</span>
    <span class="o">}</span>
   <span class="o">...</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">onOptionsItemSelected</span><span class="o">(</span><span class="n">MenuItem</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 메뉴 항목 클릭을 여기서 처리합니다..</span>
        <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getItemId</span><span class="o">();</span> <span class="c1">// 클릭된 항목 id 값 얻기</span>

        <span class="c1">//얻은 id 값에 따라 클릭 처리</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_refresh</span><span class="o">)</span> <span class="o">{</span> <span class="c1">//id값이 action_refresh 이면.</span>
            <span class="c1">// 네트워크 작업 실행</span>
            <span class="n">updateWeather</span><span class="o">();</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">onOptionsItemSelected</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h2 id="implicit-intent">Implicit Intent</h2>
<p>암시적 인텐트는 앞에서 말했다 싶이 정확히 대상 앱 컴포넌트를 정해주지 않고, 그 대신 일반적인 액션을 정해줍니다.
이번에는 암시적 인텐트를 이용하여, OpenWeatherMap 사이트에서 날시를 볼수 있도록 하는 것과, 날시 정보를 공유하는 기능을 추가해 봅시다.
먼저 WeatherFragment 에서 사이트에서 날시 보기 기능을 추가해 줍시다.
Java 코드를 수정하기 앞서, Menu 항목을 추가해 줍시다. 앞서 만들어 둔 /res/menu/weatherfragment.xml 에 코드를 추가합니다.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;menu</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span><span class="nt">&gt;</span>
    ...
    <span class="nt">&lt;item</span> <span class="na">android:id=</span><span class="s">"@+id/action_web"</span> <span class="na">android:title=</span><span class="s">"@string/web"</span>
        <span class="na">app:showAsAction=</span><span class="s">"never"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/menu&gt;</span></code></pre></figure>

<p>필요한 문자열도 strings.xml 에 추가해 줍시다.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;resources&gt;</span>
    ...
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"web"</span><span class="nt">&gt;</span>Open In Web Browser<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/resources&gt;</span></code></pre></figure>

<p>WeatherFragment 클래스 파일에서 onOptionsItemSelected 메서드 부분을 수정해 줍시다.
SharedPreference 에서 도시ID 값을 불러와서 URL 완성에 사용합니다.
그리고 암시적 인텐트를 이용에 웹 브라우저에서 열리도록 해 줍시다. 액션은 ACTION_VIEW 로 해줍니다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WeatherFragment</span> <span class="kd">extends</span> <span class="n">Fragment</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">onOptionsItemSelected</span><span class="o">(</span><span class="n">MenuItem</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 메뉴 항목 클릭을 여기서 처리합니다..</span>
        <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getItemId</span><span class="o">();</span> <span class="c1">// 클릭된 항목 id 값 얻기</span>

        <span class="c1">//얻은 id 값에 따라 클릭 처리</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_refresh</span><span class="o">)</span> <span class="o">{</span> <span class="c1">//id값이 action_refresh 이면.</span>
           <span class="o">...</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_web</span><span class="o">){</span>
            <span class="n">SharedPreferences</span> <span class="n">Pref</span> <span class="o">=</span> <span class="n">PreferenceManager</span><span class="o">.</span><span class="na">getDefaultSharedPreferences</span><span class="o">(</span><span class="n">getActivity</span><span class="o">());</span>
            <span class="n">String</span> <span class="n">CityId</span> <span class="o">=</span> <span class="n">Pref</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"pref_city_id"</span><span class="o">,</span>
                    <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">pref_city_id_default_value</span><span class="o">));</span>
            <span class="n">String</span> <span class="n">URL</span> <span class="o">=</span> <span class="s">"http://openweathermap.org/city/"</span> <span class="o">+</span> <span class="n">CityId</span><span class="o">;</span>
            <span class="n">Uri</span> <span class="n">webpage</span> <span class="o">=</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">URL</span><span class="o">);</span>
            <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">ACTION_VIEW</span><span class="o">,</span> <span class="n">webpage</span><span class="o">);</span>
                <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>

        <span class="o">}</span>

        <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">onOptionsItemSelected</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>이번에는 ShareActionProvider 를 이용해, DetailActivity 에 공유 버튼을 추가해 봅시다.
우리가 DetailActivity 를 생성할 때 같이 생성된 /res/menu/menu_detail.xml 을 편집해 줍시다.
showAsAction 은 ifRoom 으로 하여, 액션바에 공간이 있을 때 ActionButton 으로 나타나게 하고.
actionProviderClass 는 Android Support Library 에 있는 ShareActionProvider 로 해 줍니다.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;menu</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">tools:context=</span><span class="s">"com.youngbin.androidstudy.DetailActivity"</span><span class="nt">&gt;</span>
    ...
    <span class="nt">&lt;item</span> <span class="na">android:id=</span><span class="s">"@+id/action_share"</span>
        <span class="na">android:title=</span><span class="s">"@string/share"</span>
        <span class="na">app:showAsAction=</span><span class="s">"ifRoom"</span>
        <span class="na">app:actionProviderClass=</span><span class="s">"android.support.v7.widget.ShareActionProvider"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/menu&gt;</span></code></pre></figure>

<p>마찬가지로 필요한 문자열을 strings.xml 에 추가해 줍니다.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;resources&gt;</span>
    ...
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"share"</span><span class="nt">&gt;</span>Share<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/resources&gt;</span></code></pre></figure>

<p>이제 DetailActivity 클래스 파일을 수정해 봅시다. 우선 우리는 Fragment 에서 Menu Item 기능을 구현할 것이므로.
DetailActivity 를 생성할 때, 같이 Activity 쪽에 생성된 onCreateOptionsMenu 와 onOptionsItemSelected 메서드 부분을 통째로 지우고.
대신 Fragment 쪽에 메서드를 구현해 줍니다. 그리고 공유에 사용할 Implicit Intent 를 만들어 주는 메서드도 만들어 줍시다.
그리고, Fragment 부분의 onCreateView 메서드에서, setHasOptionsMenu(true); 메서드를 호출하여, Activity 에 Fragment 가 메뉴를 가지고 있음을 알려줍시다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DetailActivity</span> <span class="kd">extends</span> <span class="n">ActionBarActivity</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="n">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">...</span>
    <span class="o">}</span>

    <span class="cm">/**
     * A placeholder fragment containing a simple view.
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">PlaceholderFragment</span> <span class="kd">extends</span> <span class="n">Fragment</span> <span class="o">{</span>
        <span class="o">...</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">View</span> <span class="n">onCreateView</span><span class="o">(</span><span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                                 <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
                                 <span class="c1">// 이 Fragment 가 Overflow Menu 를 가지고 있음을 알리기.</span>
                                 <span class="n">setHasOptionsMenu</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
                                 <span class="o">...</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="n">onCreateOptionsMenu</span><span class="o">(</span><span class="n">Menu</span> <span class="n">menu</span><span class="o">,</span> <span class="n">MenuInflater</span> <span class="n">inflater</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// 정의한 Menu 리소스를 여기서 Inflate 합니다.</span>
            <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">menu</span><span class="o">.</span><span class="na">menu_detail</span><span class="o">,</span> <span class="n">menu</span><span class="o">);</span>
            <span class="c1">// 공유 버튼 찾기</span>
            <span class="n">MenuItem</span> <span class="n">menuItem</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">findItem</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_share</span><span class="o">);</span>

            <span class="c1">// ShareActionProvider 얻기</span>
            <span class="n">ShareActionProvider</span> <span class="n">mShareActionProvider</span> <span class="o">=</span>
                    <span class="o">(</span><span class="n">ShareActionProvider</span><span class="o">)</span> <span class="n">MenuItemCompat</span><span class="o">.</span><span class="na">getActionProvider</span><span class="o">(</span><span class="n">menuItem</span><span class="o">);</span>

            <span class="c1">// 공유 버튼에 사용할 Intent 를 만들어 주는 메서드를 호출합니다.</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">mShareActionProvider</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
                <span class="n">mShareActionProvider</span><span class="o">.</span><span class="na">setShareIntent</span><span class="o">(</span><span class="n">createShareForecastIntent</span><span class="o">());</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">onOptionsItemSelected</span><span class="o">(</span><span class="n">MenuItem</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// 메뉴 항목 클릭을 여기서 처리합니다..</span>
            <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getItemId</span><span class="o">();</span> <span class="c1">// 클릭된 항목 id 값 얻기</span>
            <span class="c1">// Retrieve the share menu item</span>

            <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">onOptionsItemSelected</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// 공유 버튼에 사용할 Intent 를 만들어 주는 메서드 입니다.</span>
        <span class="kd">private</span> <span class="n">Intent</span> <span class="n">createShareForecastIntent</span><span class="o">()</span> <span class="o">{</span>
            <span class="c1">//액션은 ACTION_SEND 로 합니다.</span>
            <span class="n">Intent</span> <span class="n">shareIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">ACTION_SEND</span><span class="o">);</span>
            <span class="c1">//Flag 를 설정해 줍니다. 공유하기 위해 공유에 사용할 다른 앱의 하나의 Activity 만 열고, </span>
            <span class="c1">//다시 돌아오면 열었던 Activity 는 꺼야 하기 때문에</span>
            <span class="c1">//FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET 로 해줍니다.</span>
            <span class="n">shareIntent</span><span class="o">.</span><span class="na">addFlags</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET</span><span class="o">);</span>
            <span class="c1">//공유할 것의 형태입니다. 우리는 텍스트를 공유합니다.</span>
            <span class="n">shareIntent</span><span class="o">.</span><span class="na">setType</span><span class="o">(</span><span class="s">"text/plain"</span><span class="o">);</span>
            <span class="c1">//보낼 데이터를 Extra 로 넣어줍니다.</span>
            <span class="n">shareIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">EXTRA_TEXT</span><span class="o">,</span><span class="n">WeatherData</span><span class="o">);</span>
            <span class="k">return</span> <span class="n">shareIntent</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h2 id="broadcastreceiver--intent-filter">BroadcastReceiver 와 Intent Filter</h2>
<p>BroadcastReceiver는 말 단어 그대로 방송을 받는 앱 컴포넌트 입니다. 다른 앱이나 안드로이드 시스템에서 sendBroadcast() 메서드를 통해 보내진 Intent 를 받으며,
그에 따른 것들을 처리해 줍니다. 이때 어떤 Intent 를 받을지 Intent Filter 로 정의해 줍니다. 예를들어 USB케이블 연결에 대한 Intent Filter 를 설정하여, USB 케이블 연결시 보내지는 Intent 를 받아, USB 케이블이 연결되면 남은 스토리지 용량을 보여 주도록 할 수도 있습니다.</p>

<p>아래 코드가 BroadcastReceiver 를 상속하는 클래스 코드 예제 입니다. 간단히 onReceive 메서드 하나로 구성되어 있습니다.
onReceive 메서드에 Intent 를 수신하면 실행될 코드들을 넣어주시면 됩니다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyReceiver</span> <span class="kd">extends</span> <span class="n">BroadcastReceiver</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">MyReceiver</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onReceive</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Intent 를 받으면 실행할 코드를 여기에 넣습니다.</span>

    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Broadcast가 Intent 를 받으려면, 등룩(Register)을 해 줘야 합니다. 두 가지 방법으로 등룩 해 줄 수 있습니다.
Manifest 에 정의하여 등룩하는 방법과, Java 코드를 이용해 필요할 때만 등룩하는 방법이 있습니다.</p>

<p>아래는 Manifest 에 등룩하는 방법의 에제 입니다. Manifest에 아래와 같은 코드를 넣어서 등룩합니다.
Intent Filter 태그 안에 어떤 Intent 를 받을지 Intent Filter 를 정의해 줍니다.
여기서는 전원 케이블 연결에 대한 Intent Filter 를 예시로 넣었습니다.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml">    <span class="nt">&lt;receiver</span>
            <span class="na">android:name=</span><span class="s">".MyReceiver"</span> <span class="nt">&gt;</span>
            <span class="nt">&lt;intent-filter&gt;</span>
                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"android.intent.action.ACTION_POWER_CONNECTED"</span><span class="nt">&gt;&lt;/action&gt;</span>
            <span class="nt">&lt;/intent-filter&gt;</span>
        <span class="nt">&lt;/receiver&gt;</span></code></pre></figure>

<p>Java 코드를 이용해 동적으로 등룩하고 해제할 때 아래와 같은 코드를 이용합니다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">//myReceiver 객체 생성</span>
<span class="n">MyReceiver</span> <span class="n">myReceiver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyReceiver</span><span class="o">();</span>
<span class="c1">//myReceiver 등룩</span>
<span class="n">registerReceiver</span><span class="o">(</span><span class="n">myReceiver</span><span class="o">,</span> <span class="k">new</span> <span class="n">IntentFilter</span><span class="o">(</span><span class="s">"android.intent.action.ACTION_POWER_CONNECTED"</span><span class="o">));</span>
<span class="c1">//myReceiver 등룩 해제</span>
<span class="n">unregisterReceiver</span><span class="o">(</span><span class="n">myReceiver</span><span class="o">);</span></code></pre></figure>

<h2 id="section-1">곁들여 보면 좋은 추가자료들…</h2>
<ul>
  <li><a href="http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html">Android Developers - AdapterView.OnItemClickListener</a></li>
  <li><a href="http://developer.android.com/guide/components/intents-filters.html">Android Developers - Intents and Intent Filters</a></li>
  <li><a href="http://developer.android.com/guide/topics/ui/settings.html">Android Developers - Settings</a></li>
  <li><a href="http://developer.android.com/training/basics/data-storage/shared-preferences.html">Android Developers - Saving Key-Value Sets</a></li>
  <li><a href="http://developer.android.com/reference/android/preference/PreferenceActivity.html">Android Developers - PreferenceActivity</a></li>
  <li><a href="http://developer.android.com/reference/android/content/BroadcastReceiver.html">Android Developers - BroadcastReceiver</a></li>
</ul>


          <!-- 구글플러스 +1 버튼 -->
          <!-- +1 버튼을(를) 표시하고 싶은 위치에 이 태그를 배치하세요. -->
          <br><br><div class="g-plusone"></div><br>
          <!-- Facebook 좋아요 버튼 -->
          <div class="fb-like" data-href="" data-layout="button_count"
           data-action="like" data-show-faces="true" data-share="false"></div><br>
          <br>
          
         <a class="card-content" href="/blog/tags/#develop">
             <button class="mdl-button mdl-js-button mdl-js-ripple-effect">#develop</button> </a>
         
         <a class="card-content" href="/blog/tags/#development">
             <button class="mdl-button mdl-js-button mdl-js-ripple-effect">#development</button> </a>
         
         <a class="card-content" href="/blog/tags/#android">
             <button class="mdl-button mdl-js-button mdl-js-ripple-effect">#android</button> </a>
         
         <a class="card-content" href="/blog/tags/#app">
             <button class="mdl-button mdl-js-button mdl-js-ripple-effect">#app</button> </a>
         
         <a class="card-content" href="/blog/tags/#study">
             <button class="mdl-button mdl-js-button mdl-js-ripple-effect">#study</button> </a>
         
         <a class="card-content" href="/blog/tags/#note">
             <button class="mdl-button mdl-js-button mdl-js-ripple-effect">#note</button> </a>
         
</section>
         </div>

         <div class="mdl-card mdl-cell mdl-cell--12-col postcard content" align="start">
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 블로그 포스트 광고 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-7051197638651710"
     data-ad-slot="3015305584"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

                  </div>


         <div class="mdl-card mdl-cell mdl-cell--12-col postcard content" align="start">
           

                  <table>
                    <a style="color:black;" href="/blog//2015/01/01/android-study-lesson-two-note.html" ><h4>시온고 안드로이드 스터디 노트 - 2.Connect Sunshine to the Cloud</h4></a>
                    <tr><td><i class="material-icons">today</i></td><td>2015.01.01</td></tr></table>
                  
                  
                  <a style="color:black;" href="/blog//2015/01/28/new-domain.html"><h4>도메인 갈아탔습니다.</h4></a>
                  <table><tr><td><i class="material-icons">today</i></td><td>2015.01.28</td></tr></table>
                  
                  </div>

                  <div class="mdl-card mdl-cell mdl-cell--12-col postcard content" align="start">
                 <!--COMMENT-->
         <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'youngbinhan'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</div><br><br>
                           </div>

  </div>
  </main>

</div>

<script src="/blog/js/material.min.js"></script>
<script src="/blog/js/common.js"></script>
        <script>
var $buoop = {c:2};
function $buo_f(){
 var e = document.createElement("script");
 e.src = "//browser-update.org/update.js";
 document.body.appendChild(e);
};
try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
catch(e){window.attachEvent("onload", $buo_f)}
</script>

    </body>
</html>
